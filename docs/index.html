
  
<!doctype html>
<html>

<!-- Mirrored from node-swig.github.io/swig-templates/docs/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Oct 2016 04:04:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8">
  
  <!--[if IE]>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <![endif]-->
  <title>Swig » 文档</title>
  

  

  

<link rel="stylesheet" href="../css/swig.css">



</head>
<body class="">

  


<header class="header">
  <div class="content row">
    <hgroup class="span7">
      <h1><a href="../index.html">Swig</a></h1>
      <h2>一个适用于Node.js和浏览器的模板引擎</h2>
    </hgroup>
    
    <nav class="span5">
      <ul class="mainNav">
        <li><a href="index.html">文档</a></li>
        <li><a href="https://github.com/paularmstrong/swig/">代码</a></li>
      </ul>
    </nav>
  
  </div>
</header>



<div class="content row guttered">
  <div class="span9">
  
<h1>开始</h1>

<section id="install" class="doc">
  <h2>安装</h2>

  <p>通过NPM安装:</p>

  <pre><code data-language="sh">$ npm install swig --save</code></pre>
</section>

<section id="usage" class="doc">
  <h2>基本使用方法</h2>

  <p>Swig有多种方式编译、渲染模板。更多详细信息和使用方法请查看<a href="api/index.html">API文档</a>。</p>

  <pre><code data-language="js">var swig = require('swig');

// Compile a file and store it, rendering it later
var tpl = swig.compileFile('/path/to/template.html');
console.log(tpl({ article: { title: 'Swig is fun!' }}));

// Immediately render a Swig template from a string
console.log(swig.render('{% if foo %}Hooray!{% endif %}', { locals: { foo: true }}));
</code></pre>
</section>

<section id="variables" class="doc">
  <h2>变量</h2>

  <p>传给模板的变量使用双大括号<code data-language="swig">{{}}</code>来输出。所有的输出变量都会<strong>自动转义</strong>，但是<a href="#variable-functions">函数输出</a>例外。</p>

  <h3>标记</h3>
  <p>访问对象的属性既可以使用点标记法，也可以使用方括号标记法。下面给的两个例子是等价的：</p>

  <pre><code data-language="swig">{{ foo.bar }}
// is equivalent to
{{ foo['bar'] }}</code></pre>

  <p>标记样式遵循和JavaScript相同的规则。如果键值中包括非字母数字的字符，则必须使用方括号标记法来访问，不能使用点标记法来访问。</p>

  <h4>错误！</h4>
  <pre><code data-language="swig">{{ foo.chicken-tacos }}</code></pre>
  <p>上面的例子表达出的意思是从 <var>foo.chicken</var> 中去除<var>tacos</var>：
<code data-language="swig">{{ foo.chicken - tacos }}</code></p>

  <h4>正确！</h4>
  <pre><code data-language="swig">{{ foo['chicken-tacos'] }}</code></pre>

  <h3>未定义和假值（Undefined vs Falsy Values）</h3>
  <p>如果有变量没有定义，不要担心，你的模板不会奔溃，它会以一个空字符串来代替输出。但是，一些像<code data-language="js">null, false, 0</code>的假值（falsy values）则会原样渲染。</p>

  <h3>过滤器</h3>
  <p><a href="filters/index.html">过滤器</a>是一种特殊的、链式控制结构，它可以用来修改变量：</p>

  <pre><code data-language="swig">{{ name|title }} was born on {{ birthday|date('F jS, Y') }}</code>
// => <samp>Jane was born on July 6th, 1985</samp></pre>

  <h3 id="variable-functions">函数</h3>
  <p>变量也可以是JavaScript函数。但是请注意：函数会忽略 <a href="api/index.html#SwigOpts">自动转义设置</a>, <em>不会</em>自动转义。</p>

  <pre><code data-language="js">var locals = { mystuff: function mystuff() { return '<p>Things!</p>'; } };
swig.render('{{ mystuff() }}', { locals: locals });
// => &lt;p&gt;Things!&lt;/p&gt;</code></pre>

  <p>如果需要强制转义函数输出，则使用管道语法添加<a href="filters/index.html#escape">转义过滤器</a>即可。</p>

  <pre><code data-language="swig">{{ mystuff()|escape }}
// => &amp;lt;p&amp;gt;Things&amp;lt;/p&amp;gt;</code></pre>
</section>

<section id="tags" class="doc">
  <h2>逻辑标签</h2>

  <p>Swig包括一些被称为 <a href="#tags">标签（Tags）</a>的逻辑操作块，比起变量输出，使用逻辑标签能够控制大范围的输出。在书写标签时使用 括号-百分号 的语法：。</p>

  <pre><code data-language="swig">{% if foo %}bar{% endif %}

// Create a list of people, only if there are items in the people array
{% for person in people %}
  {% if loop.first %}<ol>{% endif %}
  <li>{{ person.name }}</li>
  {% if loop.last %}</ol>{% endif %}
{% endfor %}
</code></pre>

  <p><code>结束</code> 标签可能含有的多余的文本会被忽略。这有助于我们查看和理解哪些是要闭合的块和闭合的块的位置。</p>

  <pre><code data-language="swig">{% block tacos %}
  //...
{% endblock tacos %}
{% block burritos %}
  {% if foo %}
    // ...
  {% endif the above will render if foo == true %}
{% endblock burritos %}</code></pre>

  <p>查看<a href="tags/index.html">标签文档</a> 获取更加全面的标签列表和使用指导。</p>
</section>

<section id="comments" class="doc">
  <h2>注释</h2>

  <p>注释标记会被解析器忽略。在模板被渲染之前注释标签会被移除，如此一来，除非有源代码权限，否则其他人无法看到这些注释。注释使用 括号-# 的语法：</p>

  <pre><code data-language="swig">{#
This is a comment.
It will be fully stripped and ignored during parsing.
#}</code></pre>
</section>

<section id="whitespace" class="doc">
  <h2>空白符控制</h2>

  <p>模板中的任何空白符都会留在最终输出的模板中。但是，可以在逻辑标签周围使用空白符控制来控制空白符的显示。</p>

  <p>如果需要移除掉空白符，只要在标签的开始或结束为止添加一个短横线(<code data-language="swig">-</code>)即可分别移除前后的空白符。</p>

  <pre><code data-language="swig">// seq = [1, 2, 3, 4, 5]
{% for item in seq -%}{{ item }}
{%- endfor %}</code>
// => <samp>12345</samp></pre>

  <p><em>注意：在开/闭标签和短横线之间<strong>一定不能有</strong>任何空白。</em></p>

</section>

<section id="inheritance" class="doc">
  <h2>模板继承</h2>

  <p>Swig使用<code data-language="swig">extends</code> &amp; <code data-language="swig">block</code> 来实现模板继承。</p>

  <h3>layout.html</h3>
  <pre><code data-language="swig">&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;{% block title %}My Site{% endblock %}&lt;/title&gt;

  {% block head %}
  &lt;link rel="stylesheet" href="main.css"&gt;
  {% endblock %}
&lt;/head&gt;
&lt;body&gt;
  {% block content %}{% endblock %}
&lt;/body&gt;
&lt;/html&gt;</code></pre>

  <h3>index.html</h3>
  <pre><code data-language="swig">{% extends 'layout.html' %}

{% block title %}My Page{% endblock %}

{% block head %}
  {% parent %}
  &lt;link rel="stylesheet" href="custom.css"&gt;
{% endblock %}

{% block content %}
&lt;p&gt;This is just an awesome page.&lt;/p&gt;
{% endblock %}</code></pre>
</section>

<section id="express" class="doc">
  <h2>在Express.js中使用Swig</h2>

  <p>Swig兼容<a href="http://expressjs.com/">Express</a>，<a href="http://expressjs.com/">Express</a>是一个简单的node web应用框架。下面是一个在Express中使用Swig的例子：</p>

  <pre><code data-language="js">var app = require('express')(),
  swig = require('swig'),
  people;

// This is where all the magic happens!
app.engine('html', swig.renderFile);

app.set('view engine', 'html');
app.set('views', __dirname + '/views');

// Swig will cache templates for you, but you can disable
// that and use Express's caching instead, if you like:
app.set('view cache', false);
// To disable Swig's cache, do the following:
swig.setDefaults({ cache: false });
// NOTE: You should always cache templates in a production environment.
// Don't leave both of these to `false` in production!

app.get('/', function (req, res) {
  res.render('index', { /* template locals context */ });
});

app.listen(1337);
console.log('Application Started on http://localhost:1337/');
</code></pre>

</section>


  </div>

  <div class="span3">
<nav>
  <ol class="sidenav">
    <li>
      <a href="index.html">开始</a>
      
<ol>
  <li><a href="#install">安装</a></li>
  <li><a href="#variables">变量</a></li>
  <li><a href="#tags">逻辑标签</a></li>
  <li><a href="#comments">注释</a></li>
  <li><a href="#whitespace">空表符控制</a></li>
  <li><a href="#inheritance">模板继承</a></li>
  <li><a href="#express">Express.js</a></li>
</ol>

    </li>
    <li>
      <a href="api/index.html">Swig API</a>
      
    </li>
    <li>
      <a href="filters/index.html">过滤器</a>
      
    </li>
    <li>
      <a href="tags/index.html">标签</a>
      
    </li>
    <li>
      <a href="loaders/index.html">模板加载器</a>
      
    </li>
    <li>
      <a href="cli/index.html">命令行</a>
      
    </li>
    <li>
      <a href="browser/index.html">浏览器用法</a>
      
    </li>
    <li>
      <a href="extending/index.html">扩展Swig</a>
      
    </li>
    <li><a href="previous/index.html">旧版本</a></li>
  </ol>
</nav>
</div>
</div>


<footer class="content">
  <hr class="small">
  <p>Swig is copyright &copy;2016 <a href="http://paularmstrongdesigns.com/">Paul Armstrong</a>, licensed for use under the permissive MIT Open Source License.</p>
  <a class="forkme" href="https://github.com/paularmstrong/swig">Fork me on GitHub</a>
</footer>


  
<script src="../js/lib/rainbow.min.js"></script>
<script src="../js/master.js"></script>

</body>

<!-- Mirrored from node-swig.github.io/swig-templates/docs/ by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 24 Oct 2016 04:04:46 GMT -->
</html>
